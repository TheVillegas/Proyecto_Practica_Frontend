<app-header></app-header>
<ion-content [fullscreen]="true" [scrollY]="true">
  <app-titulos-reportes [codigoALI]="codigoALI" [estadoTPA]="estadoTPA"></app-titulos-reportes>
  <ion-accordion-group [value]="seccionActual">
    <ion-accordion value="etapa1" class="contenedor_label">
      <ion-item slot="header" color="light">
        <ion-label class="titulo_contenedor">ETAPA 1 : Almacenamiento de Muestra</ion-label>
      </ion-item>
      <div class="contenido_del_label" slot="content">
        <ion-grid>
          <ion-row>
            <ion-col size="auto" class="columna_del_contendido">
              <ion-label>Lugar de Almacenamiento de la muestra</ion-label>
              <ion-select placeholder="Seleccione un Lugar" class="selecionador_opciones">
                <ion-select-option *ngFor="let lugar of listaLugares" [value]="lugar.nombre">
                  {{ lugar.nombre }}
                </ion-select-option>
              </ion-select>
            </ion-col>
            <ion-col class="columna_del_contendido">
              <ion-label>Observaciones de la Muestra</ion-label>
              <ion-textarea class="seleccionador_de_texto"></ion-textarea>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </ion-accordion>
    <ion-accordion *ngFor="let etapa2 of listaRepeticionesEtapa2; let i = index; let isLast=last" [value]="'etapa2'+ i"
      class="contenedor_label">
      <ion-item slot="header" color="light">
        <ion-label class="titulo_contenedor">ETAPA 2 : Recepcion de Muestra Analista {{i+1}} </ion-label>
      </ion-item>
      <div class="contenido_del_label" slot="content">
        <ion-grid>
          <ion-row>
            <ion-col class="columna_del_contendido">
              <ion-label>Responsable </ion-label>
              <ion-select placeholder="Seleccione un Responsable" class="selecionador_opciones">
                <ion-select-option *ngFor="let responsable of listaResponsables" [value]="responsable.nombre">
                  {{ responsable.nombre }}
                </ion-select-option>
              </ion-select>
            </ion-col>
            <ion-col class="columna_del_contendido">
              <ion-label>Fecha de Preparacion</ion-label>
              <ion-datetime-button [datetime]="'calendarioIngreso' + i"></ion-datetime-button>

              <ion-modal [keepContentsMounted]="true">
                <ng-template>
                  <ion-datetime [id]="'calendarioIngreso' + i" presentation="date" [showDefaultButtons]="true"
                    doneText="Listo" cancelText="Cancelar">
                  </ion-datetime>
                </ng-template>
              </ion-modal>
            </ion-col>
            <ion-col class="columna_del_contendido">
              <ion-label>Hora de inicio</ion-label>
              <ion-datetime-button datetime="horaInicio"></ion-datetime-button>
              <ion-modal [keepContentsMounted]="true">
                <ng-template>
                  <ion-datetime id="horaInicio" presentation="time" [showDefaultButtons]="true" doneText="Listo"
                    cancelText="Cancelar">
                  </ion-datetime>
                </ng-template>
              </ion-modal>
            </ion-col>
          </ion-row>
          <hr class="linea_divisoria">
          <ion-row>
            <ion-col>
              <ion-label>Hora de Pesado</ion-label>
              <ion-datetime-button datetime="horaPesado"></ion-datetime-button>
              <ion-modal [keepContentsMounted]="true">
                <ng-template>
                  <ion-datetime id="horaPesado" presentation="time" [showDefaultButtons]="true" doneText="Listo"
                    cancelText="Cancelar">
                  </ion-datetime>
                </ng-template>
              </ion-modal>
            </ion-col>
            <ion-col>
              <ion-label>Numero de muestras</ion-label>
              <ion-input class="contenedor_input"></ion-input>
            </ion-col>
            <ion-col>
              <ion-label>Equipo y/o Instrumento</ion-label>
              <ion-select placeholder="Seleccione un Equipo y/o Instrumento" class="selecionador_opciones">
                <ion-select-option *ngFor="let equipo of listaEquipos" [value]="equipo.nombre">
                  {{ equipo.nombre }}
                </ion-select-option>
              </ion-select>
            </ion-col>
            <ion-col>
              <ion-label>Lugar de Almacenamiento de la muestra</ion-label>
              <ion-select placeholder="Seleccione un Equipo y/o Instrumento" class="selecionador_opciones">
                <ion-select-option *ngFor="let lugar of listaLugares" [value]="lugar.nombre"
                  [disabled]="lugar.nombre === 'MesÃ³n Siembra'">
                  {{ lugar.nombre }}
                </ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>
          <hr class="linea_divisoria">
          <ion-row>
            <ion-col>
              <ion-label>Retiro o Pesado</ion-label>
              <ion-radio-group [value]="estadoSeleccionado" (ionChange)="cambiarEstado($event)">
                <div class="contenedor-radios">
                  <ion-radio value="Retiro" labelPlacement="end">Retiro</ion-radio>
                  <ion-radio value="Pesado" labelPlacement="end">Pesado</ion-radio>
                </div>
              </ion-radio-group>
            </ion-col>
            <ion-col>
              <ion-label>Clave Material Pesado</ion-label>
              <div *ngFor="let material of etapa2.listaMateriales ; let i=index; trackBy: trackById"
                class="fila_dinamica">
                <div class="contendor_doble">
                  <ion-select [(ngModel)]="material.tipoMaterial" placeholder="Seleccione la clave del material pesado"
                    class="selecionador_opciones" interface="alert">
                    <ion-select-option *ngFor="let opcion of opcionesMateriales" [value]="opcion.valor"
                      [disabled]="opcion.esTitulo">
                      {{ opcion.nombre }}
                    </ion-select-option>
                  </ion-select>
                  <ion-input [(ngModel)]="material.codigoMaterial" class="contendor_input"></ion-input>
                </div>
              </div>
              <div class="ion-text-right ion-padding-top">
                <ion-button fill="clear" size="small" (click)="agregarMaterial(i)">
                  <ion-icon name="add-circle" slot="start"></ion-icon>
                  Agregar otro material
                </ion-button>
              </div>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="isLast">
            <ion-col size="12">
              <div class="ion-padding-top">
                <ion-button expand="block" fill="outline" (click)="agregarRepeticion()">
                  <ion-icon name="add-circle-outline" slot="start"></ion-icon>
                  Agregar Otro Analista
                </ion-button>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </ion-accordion>
    <ion-accordion value="etapa3" class="contenedor_label">
      <ion-item slot="header" color="light">
        <ion-label class="titulo_contenedor">Etapa 3 : Limpieza General</ion-label>
      </ion-item>
      <div class="contenido_del_label" slot="content">
        <ion-grid>
          <ion-row>
            <ion-col size="6">
              <ion-label>Utencilio de Limpiza utilizado</ion-label>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>
    </ion-accordion>
  </ion-accordion-group>
</ion-content>